function fn_ModalOptions(t,a){var e=0,i=$("#boardModal"),n=t,o=a;i.find(".modal-content").resizable({start:function(t,a){},stop:function(t,a){},minWidth:400,minHeight:600,handles:"n, e, s, w, ne, sw, se, nw",alsoResize:".modal-body"}).draggable({handle:".modal-header",scroll:!1}),$("#modalHeader").dblclick(function(){0==e?(e=1,$(".modal-dialog").css("top","0px"),$(".modal-dialog").css("right","0px"),$(".modal-dialog").css("bottom","0px"),$(".modal-dialog").css("left","0px"),$(".modal-dialog").css("width","100%"),$(".modal-dialog").css("height","100%"),$(".modal-content").css("top","0px"),$(".modal-content").css("left","0px"),$(".modal-content").css("width","100%"),$(".modal-content").css("height","100%"),$(".modal-body").css("width","100%"),$(".modal-body").css("height","calc(100% - 134px)")):(e=0,$(".modal-dialog").css("top","0px"),$(".modal-dialog").css("right","0px"),$(".modal-dialog").css("bottom","0px"),$(".modal-dialog").css("left","0px"),$(".modal-dialog").css("width",n+"px"),$(".modal-dialog").css("height","100%"),$(".modal-content").css("top","0px"),$(".modal-content").css("left","0px"),$(".modal-content").css("width","auto"),$(".modal-content").css("height","auto"),$(".modal-body").css("width",n+"px"),$(".modal-body").css("height",o+"px"))})}$(document).ready(function(){$("#sdate").datepicker(),$("#edate").datepicker(),$("#boardModal").on("show.bs.modal",function(){$(".board-modal-dialog").css("width","650px"),$(".modal-body").css("height","500px"),$(".modal-content").css("height","auto"),fn_ModalOptions(650,500)});var t="<div class='spinner-border spinner-border-sm' role='status'><span class='visually-hidden'>Loading...</span></div> ";$(".admin_board .nav-link").click(function(){var t=$(this).attr("id").split("_")[1];$("#current_page").val(1),"active"==t?e("List","Y"):"delete"==t&&e("List","N")}),$("#boardBody").on("click",".boardView",function(){var t=$(this).attr("id").split("_")[1];if(t>0){$("#boardModal").modal("show"),$(".modal-title").text("["+t+"] View"),$("#btnEdit").text("Edit"),$("#btnEdit").attr("disabled",!1),$("#btnDel").text("Delete"),$("#btnDel").attr("disabled",!1),$("#bno").val(t),e("View")}}),$("#boardWrite").click(function(){i("INIT"),$(".modal-title").text("Writing"),$("#inputTitle").val(""),$("#inputContent").val(""),$("#btnEdit").text("Save"),$("#btnEdit").attr("disabled",!1),$("#btnDel").addClass("d-none")}),$("#btnEdit").click(function(){var a=$(this).text();$(this).prepend(t),$(this).attr("disabled",!0),e(a)}),$("#btnDel").click(function(){$(this).prepend(t),$(this).attr("disabled",!0),e("Delete")}),$("#pagination").on("click",".setPage",function(){$("#action").val("List"),$("#current_page").val($(this).text());var t=$("#boardFrm").serializeObject();$.ajax({method:"POST",url:"/admin/board/action",dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:t,success:function(t){t.result&&($("#boardBody").empty().append(t.result_list),a(t.result_page))},error:function(t){alert("Error>"+t)}})}),$("#pagination").on("click",".movePage",function(){var t=1,a=$(this).text(),i=$("#total_page").val();if(">"==a){if((t=parseInt($(".page-link").last().attr("aria-label")))>i)return!1}else if((t=parseInt($(".page-link").first().attr("aria-label")))<1)return!1;$("#current_page").val(t),e("List","Y")});var a=function(t){for(var a=t.limit,e=t.current_page?$("#current_page").val():1,i=Math.ceil(e/a)*a,n=i-a+1,o="<li class='page-item movePage'><a class='page-link' href='#' aria-label='"+(n-1)+"'><span aria-hidden='true'><</span></a></li>";n<=(t.totalPage>i?i:t.totalPage);n++){var l="";n==e&&(l="bg-secondary text-white"),o+="<li class='page-item setPage'><a class='page-link "+l+"' href='#' >"+n+"</a></li>"}o+="<li class='page-item movePage'><a class='page-link' href='#' aria-label='"+n+"'><span aria-hidden='true'>></span></a></li>",t.totalPage==e&&(n=0),$("#pagination").empty().append(o),$("#current_page").val(e),$("#total_page").val(t.totalPage)},e=function(t,n=null){if($("#action").val(t),"List"==t)$("#list_status").val(n);else if("Edit"==t||"Save"==t){var o=$("#inputTitle").val(),l=$("#inputEmail").val(),s=i("GET");$("#title").val(o),$("#email").val(l),$("#content").val(s)}var d=$("#boardFrm").serializeObject();$.ajax({method:"POST",url:"/admin/board/action",dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:d,success:function(n){n.result&&("View"==t?($.each(n.result_data,function(){i("INIT"),$("#inputTitle").val(this.title),$("#inputContent").text(this.content),"N"==this.status?($(".modal-footer-edit").addClass("d-none"),$("#inputContent").attr("disabled",!0),$("#inputTitle").attr("disabled",!0)):($(".modal-footer-edit").removeClass("d-none"),$("#inputContent").attr("disabled",!1),$("#inputTitle").attr("disabled",!1))}),$("#btnDel").removeClass("d-none")):"List"==t?($("#boardBody").empty().append(n.result_list),a(n.result_page)):($("#boardModal").modal("hide"),e("List","Y")))},error:function(t){alert("Error>"+t)}})},i=function(t){if("INIT"==t)$("#inputContentArea").html("").append("<textarea name='inputContent' id='inputContent' rows='10' cols='80'></textarea>"),CKEDITOR.replace("inputContent"),CKEDITOR.config.height="15rem";else if("GET"==t)return CKEDITOR.instances.inputContent.getData()};e("List","Y")}),$(document).ready(function(){$("#boardModal").on("show.bs.modal",function(){$(".board-modal-dialog").css("width","750px"),$(".modal-body").css("height","450px"),$(".modal-content").css("height","auto"),fn_ModalOptions(750,450)})});
