function init_modal(t,e,o){$("#"+t).on("show.bs.modal",function(){$(".board-modal-dialog").css("width",e+"px"),$(".modal-body").css("height",o+"px"),$(".modal-content").css("height","auto"),fn_ModalOptions(t,e,o)})}function fn_ModalOptions(t,e,o){var a=0,n=$("#"+t),d=e,l=o;n.find(".modal-content").resizable({start:function(t,e){},stop:function(t,e){},minWidth:400,minHeight:110,handles:"n, e, s, w, ne, sw, se, nw",alsoResize:".modal-body"}).draggable({handle:".modal-header",scroll:!1}),$("#modalHeader").dblclick(function(){0==a?(a=1,$(".modal-dialog").css("top","0px"),$(".modal-dialog").css("right","0px"),$(".modal-dialog").css("bottom","0px"),$(".modal-dialog").css("left","0px"),$(".modal-dialog").css("width","100%"),$(".modal-dialog").css("height","100%"),$(".modal-content").css("top","0px"),$(".modal-content").css("left","0px"),$(".modal-content").css("width","100%"),$(".modal-content").css("height","100%"),$(".modal-body").css("width","100%"),$(".modal-body").css("height","calc(100% - 134px)")):(a=0,$(".modal-dialog").css("top","0px"),$(".modal-dialog").css("right","0px"),$(".modal-dialog").css("bottom","0px"),$(".modal-dialog").css("left","0px"),$(".modal-dialog").css("width",d+"px"),$(".modal-dialog").css("height","100%"),$(".modal-content").css("top","0px"),$(".modal-content").css("left","0px"),$(".modal-content").css("width","auto"),$(".modal-content").css("height","auto"),$(".modal-body").css("width",d+"px"),$(".modal-body").css("height",l+"px"))})}$(document).ready(function(){var t="<div class='spinner-border spinner-border-sm' role='status'><span class='visually-hidden'>Loading...</span></div> ";init_modal("modalCategory",450,110),$("#btnCategoryModal").click(function(){console.log("modalCategory"),$(".modal-title").text("Category"),$("#inputCategory").val(""),$("#inputRemark").val(""),$("#btnCategory").text("Save"),$("#btnCategory").attr("disabled",!1)}),$("#btnCategory").click(function(){var o=$(this).text();$(this).prepend(t),$(this).attr("disabled",!0),e("categoryFrm",o,"")}),init_modal("modalCode",450,150),$("#btnCodeModal").on("click",function(){$(".modal-title").empty().append('Code :: <span class="badge rounded-pill bg-light text-dark">'+$("#category").val()+"</span>"),$("#inputCategory").val(""),$("#inputSort").val(""),$("#inputCode").val(""),$("#inputName").val(""),$("#btnCode").text("Save"),$("#btnCode").attr("disabled",!1)}),$("#btnCode").click(function(){var o=$("#category").val(),a=$(this).text();$(this).prepend(t),$(this).attr("disabled",!0),e("categoryCodeFrm",a,o)});var e=function(t,o,a){if($("input[name=category]",document.form).val(a),$("input[name=action]",document.form).val(o),"Save"==o)switch(t){case"categoryFrm":$("input[name=remark]",document.form).val($("#inputRemark").val()),$("input[name=category]",document.form).val($("#inputCategory").val());break;case"categoryCodeFrm":$("input[name=sort]",document.form).val($("#inputSort").val()),$("input[name=code]",document.form).val($("#inputCode").val()),$("input[name=name]",document.form).val($("#inputName").val())}var n=$("#"+t).serializeObject();$.ajax({method:"POST",url:"/admin/setting/"+o,dataType:"JSON",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:n,success:function(n){if(n.result)if("List"==o){switch(t){case"categoryFrm":$("#categoryBody").empty().append(n.result_list);break;case"categoryCodeFrm":$("#categoryCodeBody").empty().append(n.result_list),$("#btnCodeModal").removeClass("d-none"),$("#category-title").empty().append('Code List :: <span class="badge rounded-pill bg-light text-dark">'+a+"</span>")}feather.replace()}else"Update"!=o&&"Delete"!=o&&"Save"!=o||("Save"==o&&$("div[id^='modal']").modal("hide"),e(t,"List",a))},error:function(t){alert("Error>"+t)}})};e("categoryFrm","List","All"),$("#categoryBody").on("click",".categoryList",function(){var t=$(this).attr("id");e("categoryCodeFrm","List",t)}),$("#categoryBody").on("click",".categoryLock",function(){var t=$(this).attr("id").split("_")[1],e=$("#remark_"+t).text();$("#remark_"+t).empty().append('<input class="form-control form-control-sm" text="name" value="'+e+'" style="border:0px; font-size:0.75rem;"></td>'),$("#remark_"+t+" > input").select(),$(this).removeClass("d-inline"),$(this).addClass("d-none"),$("#unlock_"+t).removeClass("d-none"),$("#unlock_"+t).addClass("d-inline"),$("#delete_"+t).removeClass("d-none"),$("#delete_"+t).addClass("d-inline")}),$("#categoryBody").on("click",".categoryUnLock",function(){var t=$(this).attr("id").split("_")[1],o=$("#remark_"+t+" > input").val();$(this).removeClass("d-inline"),$(this).addClass("d-none"),$("#lock_"+t).removeClass("d-none"),$("#lock_"+t).addClass("d-inline"),$("#remark").val(o),e("categoryFrm","Update",t)}),$("#categoryBody").on("click",".categoryDelete",function(){var t=$(this).attr("id").split("_")[1];e("categoryFrm","Delete",t)}),$("#categoryCodeBody").on("click",".categoryCodeLock",function(){var t=$(this).attr("id").split("_"),e=t[1]+"_"+t[2],o=$("#sort_"+e).text(),a=$("#name_"+e).text();$("#sort_"+e).empty().append('<input class="form-control form-control-sm" text="name" value="'+o+'" style="border:0px; font-size:0.75rem;"></td>'),$("#name_"+e).empty().append('<input class="form-control form-control-sm" text="name" value="'+a+'" style="border:0px; font-size:0.75rem;"></td>'),$("#sort_"+e+" > input").select(),$(this).removeClass("d-inline"),$(this).addClass("d-none"),$("#unlock_"+e).removeClass("d-none"),$("#unlock_"+e).addClass("d-inline"),$("#delete_"+e).removeClass("d-none"),$("#delete_"+e).addClass("d-inline")}),$("#categoryCodeBody").on("click",".categoryCodeUnLock",function(){var t=$(this).attr("id").split("_"),o=t[1],a=t[1]+"_"+t[2],n=$("#sort_"+a+" > input").val(),d=$("#name_"+a+" > input").val(),l=$("#code_"+a).text();$(this).removeClass("d-inline"),$(this).addClass("d-none"),$("#lock_"+a).removeClass("d-none"),$("#lock_"+a).addClass("d-inline"),$("#sort").val(n),$("#code").val(l),$("#name").val(d),e("categoryCodeFrm","Update",o)}),$("#categoryCodeBody").on("click",".categoryCodeDelete",function(){var t=$(this).attr("id").split("_"),o=t[1],a=t[1]+"_"+t[2],n=$("#code_"+a).text();$("#code").val(n),e("categoryCodeFrm","Delete",o)})});
